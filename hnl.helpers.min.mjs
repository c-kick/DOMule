export function objForEach(object,callback,callbackDone,thisArg=window){if(typeof object!=="object"||object===null)throw new TypeError("Not an object");let c=0;for(const key in object){if(Object.prototype.hasOwnProperty.call(object,key))callback.call(thisArg,key,object[key],c,object);c++}if(typeof callbackDone==="function")callbackDone.call(thisArg)}export function forEachBatched(obj,callback,doneCallback,batchSize=100){if(obj==null||typeof obj!=="object")throw new TypeError("Invalid input. Expected an object.");
if(typeof callback!=="function"||typeof doneCallback!=="function")throw new TypeError("Invalid callback function(s).");const keys=Object.keys(obj);const len=keys.length;let i=0;const interval=10;const processData=start=>{let end=Math.min(start+batchSize,len);while(start<end){const key=keys[start];callback.call(obj,obj[key],key,obj);start++}if(start<len)setTimeout(()=>processData(start),interval);else doneCallback.call(obj,obj[keys[len-1]],keys[len-1],obj)};processData(i)}export function isVisible(element,
callback,viewport={}){if(!(element instanceof Element))throw new TypeError("Not a valid node");const rect=element.getBoundingClientRect();const scrollTop=window.pageYOffset||document.documentElement.scrollTop;const scrollLeft=window.pageXOffset||document.documentElement.scrollLeft;const clientTop=document.documentElement.clientTop;const clientLeft=document.documentElement.clientLeft;rect.pageY=rect.top+scrollTop-clientTop;rect.pageX=rect.left+scrollLeft-clientLeft;viewport={top:typeof viewport.top!==
"undefined"?viewport.top:0,bottom:typeof viewport.bottom!=="undefined"?viewport.bottom:window.innerHeight||document.documentElement.clientHeight,left:typeof viewport.left!=="undefined"?viewport.left:0,right:typeof viewport.right!=="undefined"?viewport.right:window.innerWidth||document.documentElement.clientWidth};const vis=(rect.height>0||rect.width>0)&&rect.bottom<viewport.bottom&&rect.right<viewport.right&&rect.top>viewport.top&&rect.left>viewport.left;if(typeof callback==="function")callback.call(this,
vis,rect,viewport)}export function getScriptPath(){if("noModule"in HTMLScriptElement.prototype&&typeof import.meta!=="undefined"&&typeof import.meta.url==="string")return(new URL(import.meta.url)).pathname;else{let uriRegex=new RegExp(/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00c2\u00ab\u00c2\u00bb\u00e2\u20ac\u0153\u00e2\u20ac\u009d\u00e2\u20ac\u02dc\u00e2\u20ac\u2122]))/ig);
let traceUrls=(new Error).stack.match(uriRegex);return traceUrls[traceUrls.length-1].substring(0,traceUrls[traceUrls.length-1].lastIndexOf("/"))}}export function writeCSS(src){if(!src)throw new Error(`No CSS file path provided`);const link=document.createElement("link");link.setAttribute("type","text/css");link.setAttribute("rel","stylesheet");link.setAttribute("href",src);document.head.appendChild(link);return true};
