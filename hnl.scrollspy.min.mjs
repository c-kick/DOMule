import eventHandler from"./hnl.eventhandler.mjs";const NAME="scrollSpy";export function init(elements){elements.forEach(function(element){let offset=0;if(!element.dataset.menuTarget)throw new TypeError("No menu target (data-menu-target) specified!");element._menuTgt=document.getElementById(element.dataset.menuTarget.trim().slice(1));element._offset=element.dataset.scrollOffset||0;element._jumpLinks=element.querySelectorAll(".jumplink");eventHandler.addListener("docShift",function(){offset=parseInt(element._offset.toString().trim().slice(0,
2)==="--"?document.documentElement.style.getPropertyValue(element._offset):element._offset,10);let activeJumplink="";Object.values(element._jumpLinks).reverse().forEach(function(jumpLink){if(jumpLink.getBoundingClientRect().y-offset<=0&&!activeJumplink)activeJumplink=jumpLink.id});element._menuTgt.querySelectorAll('[href^="#"]').forEach(function(link){if(link.href.trim().split("#")[1]===activeJumplink){link.classList.add("active");link.ariaCurrent="page"}else{link.classList.remove("active");link.removeAttribute("aria-current")}})})()})};
